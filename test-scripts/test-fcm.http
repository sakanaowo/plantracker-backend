### PLANTRACKER FCM API TESTS
### Requires: REST Client extension in VS Code

@baseUrl = http://localhost:3000
@token = YOUR_JWT_TOKEN_HERE

### 1. Register Device (POST /users/devices/register)
POST {{baseUrl}}/users/devices/register
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "fcmToken": "eXAMPLE_FCM_TOKEN_12345",
  "platform": "ANDROID",
  "deviceModel": "Samsung Galaxy S23",
  "appVersion": "1.0.0",
  "locale": "vi-VN",
  "timezone": "Asia/Ho_Chi_Minh"
}

### 2. Get All Devices (GET /users/devices)
GET {{baseUrl}}/users/devices
Authorization: Bearer {{token}}

### 3. Update FCM Token (PATCH /users/devices/token)
PATCH {{baseUrl}}/users/devices/token
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "deviceId": "DEVICE_ID_FROM_STEP_1",
  "newFcmToken": "NEW_FCM_TOKEN_67890"
}

### 4. Unregister Device (DELETE /users/devices/:deviceId)
DELETE {{baseUrl}}/users/devices/DEVICE_ID_HERE
Authorization: Bearer {{token}}

### 5. Register Another Device (iOS)
POST {{baseUrl}}/users/devices/register
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "fcmToken": "iOS_FCM_TOKEN_EXAMPLE",
  "platform": "IOS",
  "deviceModel": "iPhone 15 Pro",
  "appVersion": "1.0.0",
  "locale": "en-US",
  "timezone": "America/Los_Angeles"
}

### 6. Re-register Same Token (Should Update)
POST {{baseUrl}}/users/devices/register
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "fcmToken": "eXAMPLE_FCM_TOKEN_12345",
  "platform": "ANDROID",
  "deviceModel": "Samsung Galaxy S24 Ultra",
  "appVersion": "1.1.0",
  "locale": "en-US",
  "timezone": "America/New_York"
}
